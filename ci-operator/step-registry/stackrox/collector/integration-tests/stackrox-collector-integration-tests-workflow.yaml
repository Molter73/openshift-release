workflow:
  as: stackrox-collector-integration-tests
  steps:
    pre:
      - ref: stackrox-collector-integration-tests-setup
    test:
      - ref: stackrox-collector-push-images
        dependencies:
          - env: COLLECTOR_SLIM
            name: collector-slim
          - env: COLLECTOR_FULL
            name: collector-full
          - env: COLLECTOR_BUILDER
            name: root
      - ref: stackrox-collector-integration-tests
    post:
      - ref: stackrox-collector-integration-tests-teardown
  documentation: |-
    Runs the stackrox/collector integration tests, including setup and teardown
    of a GCP VM upon which to test.
